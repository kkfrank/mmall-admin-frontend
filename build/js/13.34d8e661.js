(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{140:function(e,t,n){var o,r,a;a=this,o=[n(115)],void 0===(r=function(e){return a.Module=(t=e,n=[].slice,function(){function e(e){var n,o,r,a,i,s,l;if(this.opts=t.extend({},this.opts,e),(n=this.constructor)._connectedClasses||(n._connectedClasses=[]),i=function(){var e,t,n,r;for(r=[],e=0,t=(n=this.constructor._connectedClasses).length;e<t;e++)o=n[e],l=o.pluginName.charAt(0).toLowerCase()+o.pluginName.slice(1),o.prototype._connected&&(o.prototype._module=this),r.push(this[l]=new o);return r}.call(this),this._connected)this.opts=t.extend({},this.opts,this._module.opts);else for(this._init(),r=0,s=i.length;r<s;r++)"function"==typeof(a=i[r])._init&&a._init();this.trigger("initialized")}return e.extend=function(e){var t,n,o;if(null!=e&&"object"==typeof e){for(t in e)o=e[t],"included"!==t&&"extended"!==t&&(this[t]=o);return null!=(n=e.extended)?n.call(this):void 0}},e.include=function(e){var t,n,o;if(null!=e&&"object"==typeof e){for(t in e)o=e[t],"included"!==t&&"extended"!==t&&(this.prototype[t]=o);return null!=(n=e.included)?n.call(this):void 0}},e.connect=function(e){if("function"==typeof e){if(!e.pluginName)throw new Error("Module.connect: cannot connect plugin without pluginName");return e.prototype._connected=!0,this._connectedClasses||(this._connectedClasses=[]),this._connectedClasses.push(e),e.pluginName?this[e.pluginName]=e:void 0}},e.prototype.opts={},e.prototype._init=function(){},e.prototype.on=function(){var e,o;return e=1<=arguments.length?n.call(arguments,0):[],(o=t(this)).on.apply(o,e),this},e.prototype.one=function(){var e,o;return e=1<=arguments.length?n.call(arguments,0):[],(o=t(this)).one.apply(o,e),this},e.prototype.off=function(){var e,o;return e=1<=arguments.length?n.call(arguments,0):[],(o=t(this)).off.apply(o,e),this},e.prototype.trigger=function(){var e,o;return e=1<=arguments.length?n.call(arguments,0):[],(o=t(this)).trigger.apply(o,e),this},e.prototype.triggerHandler=function(){var e,o;return e=1<=arguments.length?n.call(arguments,0):[],(o=t(this)).triggerHandler.apply(o,e)},e.prototype._t=function(){var e,t;return e=1<=arguments.length?n.call(arguments,0):[],(t=this.constructor)._t.apply(t,e)},e._t=function(){var e,t,o,r;return t=arguments[0],e=2<=arguments.length?n.call(arguments,1):[],r=(null!=(o=this.i18n[this.locale])?o[t]:void 0)||"",e.length>0?(r=r.replace(/([^%]|^)%(?:(\d+)\$)?s/g,(function(t,n,o){return o?n+e[parseInt(o)-1]:n+e.shift()}))).replace(/%%s/g,"%s"):r},e.i18n={"zh-CN":{}},e.locale="zh-CN",e}());var t,n}.apply(t,o))||(e.exports=r)},152:function(e,t,n){},186:function(e,t,n){var o,r,a;a=this,o=[n(115),n(140)],void 0===(r=function(e,t){return a.hotkeys=function(e,t){var n,o={}.hasOwnProperty;return n=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,t),n.count=0,n.keyNameMap={8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",91:"Meta",93:"Meta",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"Multiply",107:"Add",109:"Subtract",110:"Decimal",111:"Divide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",59:";",61:"=",186:";",187:"=",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},n.aliases={escape:"esc",delete:"del",return:"enter",ctrl:"control",space:"spacebar",ins:"insert",cmd:"meta",command:"meta",wins:"meta",windows:"meta"},n.normalize=function(e){var t,n,o,r,a,i;for(t=n=0,i=(a=e.toLowerCase().replace(/\s+/gi,"").split("+")).length;n<i;t=++n)o=a[t],a[t]=this.aliases[o]||o;return r=a.pop(),a.sort().push(r),a.join("_")},n.prototype.opts={el:document},n.prototype._init=function(){return this.id=++this.constructor.count,this._map={},this._delegate="string"==typeof this.opts.el?document:this.opts.el,e(this._delegate).on("keydown.simple-hotkeys-"+this.id,this.opts.el,(t=this,function(e){var n;return null!=(n=t._getHander(e))?n.call(t,e):void 0}));var t},n.prototype._getHander=function(e){var t,n;if(t=this.constructor.keyNameMap[e.which])return n="",e.altKey&&(n+="alt_"),e.ctrlKey&&(n+="control_"),e.metaKey&&(n+="meta_"),e.shiftKey&&(n+="shift_"),n+=t.toLowerCase(),this._map[n]},n.prototype.respondTo=function(e){return"string"==typeof e?null!=this._map[this.constructor.normalize(e)]:null!=this._getHander(e)},n.prototype.add=function(e,t){return this._map[this.constructor.normalize(e)]=t,this},n.prototype.remove=function(e){return delete this._map[this.constructor.normalize(e)],this},n.prototype.destroy=function(){return e(this._delegate).off(".simple-hotkeys-"+this.id),this._map={},this},n}(t),function(e){return new n(e)}}(e,t)}.apply(t,o))||(e.exports=r)},187:function(e,t,n){var o,r,a;a=this,o=[n(115),n(140)],void 0===(r=function(e,t){return a.uploader=function(e,t){var n,o={}.hasOwnProperty;return n=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}var r;return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(n,t),n.count=0,n.prototype.opts={url:"",params:null,fileKey:"upload_file",connectionCount:3},n.prototype._init=function(){var t;return this.files=[],this.queue=[],this.id=++n.count,this.on("uploadcomplete",(t=this,function(n,o){return t.files.splice(e.inArray(o,t.files),1),t.queue.length>0&&t.files.length<t.opts.connectionCount?t.upload(t.queue.shift()):0===t.files.length?t.uploading=!1:void 0})),e(window).on("beforeunload.uploader-"+this.id,function(e){return function(t){if(e.uploading)return t.originalEvent.returnValue=e._t("leaveConfirm"),e._t("leaveConfirm")}}(this))},n.prototype.generateId=(r=0,function(){return r+=1}),n.prototype.upload=function(t,n){var o,r,a,i;if(null==n&&(n={}),null!=t){if(e.isArray(t)||t instanceof FileList)for(r=0,i=t.length;r<i;r++)o=t[r],this.upload(o,n);else e(t).is("input:file")?((a=e(t).attr("name"))&&(n.fileKey=a),this.upload(e.makeArray(e(t)[0].files),n)):t.id&&t.obj||(t=this.getFile(t));if(t&&t.obj)if(e.extend(t,n),this.files.length>=this.opts.connectionCount)this.queue.push(t);else if(!1!==this.triggerHandler("beforeupload",[t]))return this.files.push(t),this._xhrUpload(t),this.uploading=!0}},n.prototype.getFile=function(e){var t,n,o;return e instanceof window.File||e instanceof window.Blob?(t=null!=(n=e.fileName)?n:e.name,{id:this.generateId(),url:this.opts.url,params:this.opts.params,fileKey:this.opts.fileKey,name:t,size:null!=(o=e.fileSize)?o:e.size,ext:t?t.split(".").pop().toLowerCase():"",obj:e}):null},n.prototype._xhrUpload=function(t){var n,o,r,a,i;if((n=new FormData).append(t.fileKey,t.obj),n.append("original_filename",t.name),t.params)for(o in r=t.params)a=r[o],n.append(o,a);return t.xhr=e.ajax({url:t.url,data:n,processData:!1,contentType:!1,type:"POST",headers:{"X-File-Name":encodeURIComponent(t.name)},xhr:function(){var t,n;return(t=e.ajaxSettings.xhr())&&(t.upload.onprogress=(n=this,function(e){return n.progress(e)})),t},progress:(i=this,function(e){if(e.lengthComputable)return i.trigger("uploadprogress",[t,e.loaded,e.total])}),error:function(e){return function(n,o,r){return e.trigger("uploaderror",[t,n,o])}}(this),success:function(n){return function(o){return n.trigger("uploadprogress",[t,t.size,t.size]),n.trigger("uploadsuccess",[t,o]),e(document).trigger("uploadsuccess",[t,o,n])}}(this),complete:function(e){return function(n,o){return e.trigger("uploadcomplete",[t,n.responseText])}}(this)})},n.prototype.cancel=function(e){var t,n,o,r;if(!e.id)for(n=0,o=(r=this.files).length;n<o;n++)if((t=r[n]).id===1*e){e=t;break}return this.trigger("uploadcancel",[e]),e.xhr&&e.xhr.abort(),e.xhr=null},n.prototype.readImageFile=function(t,n){var o,r;if(e.isFunction(n))return(r=new Image).onload=function(){return n(r)},r.onerror=function(){return n()},window.FileReader&&FileReader.prototype.readAsDataURL&&/^image/.test(t.type)?((o=new FileReader).onload=function(e){return r.src=e.target.result},o.readAsDataURL(t)):n()},n.prototype.destroy=function(){var t,n,o,r;for(this.queue.length=0,n=0,o=(r=this.files).length;n<o;n++)t=r[n],this.cancel(t);return e(window).off(".uploader-"+this.id),e(document).off(".uploader-"+this.id)},n.i18n={"zh-CN":{leaveConfirm:"正在上传文件，如果离开上传会自动取消"}},n.locale="zh-CN",n}(t),function(e){return new n(e)}}(e,t)}.apply(t,o))||(e.exports=r)},188:function(module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _createSuper(e){return function(){var t,n=_getPrototypeOf(e);if(_isNativeReflectConstruct()){var o=_getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var emptyFunction=function(){},currentIEID=0,IEFormGroup=[!0],xhrList=[],currentXHRID=0,FileUpload=function(_Component){_inherits(FileUpload,_Component);var _super=_createSuper(FileUpload);function FileUpload(e){var t;return _classCallCheck(this,FileUpload),(t=_super.call(this,e)).state={chooseBtn:{},uploadBtn:{},before:[],middle:[],after:[]},t}return _createClass(FileUpload,[{key:"_updateProps",value:function(e){var t=this;this.isIE=!(this.checkIE()<0||this.checkIE()>=10);var n=e.options;this.baseUrl=n.baseUrl,this.param=n.param,this.chooseAndUpload=n.chooseAndUpload||!1,this.paramAddToField=n.paramAddToField||void 0,this.dataType="json",n.dataType&&"text"==n.dataType.toLowerCase()&&(this.dataType="text"),this.wrapperDisplay=n.wrapperDisplay||"inline-block",this.timeout="number"==typeof n.timeout&&n.timeout>0?n.timeout:0,this.accept=n.accept||"",this.multiple=n.multiple||!1,this.numberLimit=n.numberLimit||!1,this.fileFieldName=n.fileFieldName||!1,this.withCredentials=n.withCredentials||!1,this.requestHeaders=n.requestHeaders||!1,this.beforeChoose=n.beforeChoose||emptyFunction,this.chooseFile=n.chooseFile||emptyFunction,this.beforeUpload=n.beforeUpload||emptyFunction,this.doUpload=n.doUpload||emptyFunction,this.uploading=n.uploading||emptyFunction,this.uploadSuccess=n.uploadSuccess||emptyFunction,this.uploadError=n.uploadError||emptyFunction,this.uploadFail=n.uploadFail||emptyFunction,this.onabort=n.onabort||emptyFunction,this.files=n.files||this.files||!1,this.disabledIEChoose=n.disabledIEChoose||!1,this._withoutFileUpload=n._withoutFileUpload||!1,this.filesToUpload=n.filesToUpload||[],this.textBeforeFiles=n.textBeforeFiles||!1,this.filesToUpload.length&&!this.isIE&&this.filesToUpload.forEach((function(e){t.files=[e],t.commonUpload()}));var o,r,a=0,i=[],s=[],l=[];this.chooseAndUpload?react__WEBPACK_IMPORTED_MODULE_0___default.a.Children.forEach(e.children,(function(e){e&&"chooseAndUpload"==e.ref?(o=e,a++):0==a?i.push(e):1==a&&s.push(e)})):react__WEBPACK_IMPORTED_MODULE_0___default.a.Children.forEach(e.children,(function(e){e&&"chooseBtn"==e.ref?(o=e,a++):e&&"uploadBtn"==e.ref?(r=e,a++):0==a?i.push(e):1==a?s.push(e):l.push(e)})),this.setState({chooseBtn:o,uploadBtn:r,before:i,middle:s,after:l})}},{key:"commonChooseFile",value:function(){var e=this.beforeChoose();1!=e&&null!=e||this.refs.ajax_upload_file_input.click()}},{key:"commonChange",value:function(e){var t;e.dataTransfer?t=e.dataTransfer.files:e.target&&(t=e.target.files);var n="function"==typeof this.numberLimit?this.numberLimit():this.numberLimit;if(this.multiple&&n&&t.length>n){for(var o={},r=0;r<n;r++)o[r]=t[r];o.length=n,t=o}this.files=t,this.chooseFile(t),this.chooseAndUpload&&this.commonUpload()}},{key:"commonUpload",value:function(){var e=this,t=this.files.length&&this.files[0].mill||(new Date).getTime(),n=this.beforeUpload(this.files,t);if(1==n||null==n||"object"==_typeof(n)){if(this.files){if(!this.baseUrl)throw new Error("baseUrl missing in options");var o={},r=new FormData;if(this.textBeforeFiles&&(r=this.appendFieldsToFormData(r)),!this._withoutFileUpload){var a=_typeof(this.fileFieldName);Object.keys(this.files).forEach((function(t){if("length"!=t)if("function"==a){var n=e.files[t],o=e.fileFieldName(n);r.append(o,n)}else if("string"==a){var i=e.files[t];r.append(e.fileFieldName,i)}else{var s=e.files[t];r.append(s.name,s)}}))}this.textBeforeFiles||(r=this.appendFieldsToFormData(r));var i=this.baseUrl,s="function"==typeof this.param?this.param(this.files):this.param,l="";if(s){var c=[];s._=t,Object.keys(s).forEach((function(e){return c.push("".concat(e,"=").concat(s[e]))})),l="?"+c.join("&")}var u=i+l,p=new XMLHttpRequest;p.open("POST",u,!0),p.withCredentials=this.withCredentials;var f=this.requestHeaders;f&&Object.keys(f).forEach((function(e){return p.setRequestHeader(e,f[e])})),this.timeout&&(p.timeout=this.timeout,p.ontimeout=function(){e.uploadError({type:"TIMEOUTERROR",message:"timeout"}),o.isTimeout=!1},o.isTimeout=!1,setTimeout((function(){o.isTimeout=!0}),this.timeout)),p.onreadystatechange=function(){try{if(4==p.readyState&&p.status>=200&&p.status<400){var t="json"==e.dataType?JSON.parse(p.responseText):p.responseText;e.uploadSuccess(t)}else if(4==p.readyState){var n="json"==e.dataType?JSON.parse(p.responseText):p.responseText;e.uploadFail(n)}}catch(t){!o.isTimeout&&e.uploadError({type:"FINISHERROR",message:t.message})}},p.onerror=function(){try{var t="json"==e.dataType?JSON.parse(p.responseText):p.responseText;e.uploadError({type:"XHRERROR",message:t})}catch(t){e.uploadError({type:"XHRERROR",message:t.message})}},p.onprogress=p.upload.onprogress=function(n){e.uploading(n,t)},this._withoutFileUpload?p.send(null):p.send(r),xhrList.push(p);var d=xhrList.length-1;currentXHRID=d,p.onabort=function(){return e.onabort(t,d)},this.doUpload(this.files,t,currentXHRID),this.refs.ajax_upload_file_input.value=""}}else this.refs.ajax_upload_file_input.value=""}},{key:"appendFieldsToFormData",value:function(e){var t="function"==typeof this.paramAddToField?this.paramAddToField():this.paramAddToField;return t&&Object.keys(t).map((function(n){return e.append(n,t[n])})),e}},{key:"IEBeforeChoose",value:function(e){var t=this.beforeChoose();1!=t&&null!=t&&e.preventDefault()}},{key:"IEChooseFile",value:function(e){this.fileName=e.target.value.substring(e.target.value.lastIndexOf("\\")+1),this.chooseFile(this.fileName),this.chooseAndUpload&&!1!==this.IEUpload()&&document.getElementById("ajax_upload_file_form_".concat(this.IETag).concat(currentIEID)).submit(),e.target.blur()}},{key:"IEUpload",value:function(e){var t=this,n=(new Date).getTime(),o=this.beforeUpload(this.fileName,n);if(!this.fileName||1!=o&&null!=o)return e&&e.preventDefault(),!1;var r=this,a=this.baseUrl,i="function"==typeof this.param?this.param(this.fileName):this.param,s="";if(i){var l=[];for(var c in i._=n,void 0===i.ie&&(i.ie="true"),i)null!=i[c]&&l.push("".concat(c,"=").concat(i[c]));s="?"+l.join("&")}var u=a+s;document.getElementById("ajax_upload_file_form_".concat(this.IETag).concat(currentIEID)).setAttribute("action",u);var p=this.fakeProgress(),f=0,d=0,_=setInterval((function(){f=p(f),t.uploading({loaded:f,total:100},n),++d>=150&&clearInterval(_)}),200),h=currentIEID;function y(){clearInterval(_);try{r.uploadSuccess(r.IECallback(r.dataType,h))}catch(e){r.uploadError(e)}finally{var e=document.getElementById("ajax_upload_hidden_input_".concat(r.IETag).concat(h));e.outerHTML=e.outerHTML}}window.attachEvent?document.getElementById("ajax_upload_file_frame_".concat(this.IETag).concat(h)).attachEvent("onload",y):document.getElementById("ajax_upload_file_frame_".concat(this.IETag).concat(h)).addEventListener("load",y),this.doUpload(this.fileName,n),IEFormGroup[currentIEID]=!1}},{key:"IECallback",value:function IECallback(dataType,frameId){IEFormGroup[frameId]=!0;var frame=document.getElementById("ajax_upload_file_frame_".concat(this.IETag).concat(frameId)),resp={},content=frame.contentWindow?frame.contentWindow.document.body:frame.contentDocument.document.body;if(!content)throw new Error("Your browser does not support async upload");try{resp.responseText=content.innerHTML||"null innerHTML",resp.json=JSON?JSON.parse(resp.responseText):eval("(".concat(resp.responseText,")"))}catch(e){if(e.message&&e.message.indexOf("Unexpected token")>=0){if(resp.responseText.indexOf("{")>=0){var msg=resp.responseText.substring(resp.responseText.indexOf("{"),resp.responseText.lastIndexOf("}")+1);return JSON?JSON.parse(msg):eval("(".concat(msg,")"))}return{type:"FINISHERROR",message:e.message}}throw e}return"json"==dataType?resp.json:resp.responseText}},{key:"forwardChoose",value:function(){if(this.isIE)return!1;this.commonChooseFile()}},{key:"fowardRemoveFile",value:function(e){this.files=e(this.files)}},{key:"filesToUpload",value:function(e){this.isIE||(this.files=e,this.commonUpload())}},{key:"abort",value:function(e){void 0===e?xhrList[currentXHRID].abort():xhrList[e].abort()}},{key:"checkIE",value:function(){var e=this.userAgent,t=e.indexOf("MSIE");return t<0?-1:parseFloat(e.substring(t+5,e.indexOf(";",t)))}},{key:"fakeProgress",value:function(){var e=6;return function(t){var n=t;return n>=98||(n+=e,(e-=.3)<.2&&(e=.2)),n}}},{key:"getUserAgent",value:function(){var e=this.props.options&&this.props.options.userAgent,t="undefined"!=typeof navigator;if(!t&&!e)throw new Error("`options.userAgent` must be set rendering react-fileuploader in situations when `navigator` is not defined in the global namespace. (on the server, for example)");return t?navigator.userAgent:e}},{key:"componentWillMount",value:function(){this.userAgent=this.getUserAgent(),this.isIE=!(this.checkIE()<0||this.checkIE()>=10);var e=this.props.options&&this.props.options.tag;this.IETag=e?e+"_":"",this._updateProps(this.props)}},{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){this._updateProps(e)}},{key:"render",value:function(){return this._packRender()}},{key:"_packRender",value:function(){var e=this,t="";if(this.isIE)t=this._multiIEForm();else{var n={accept:this.accept,multiple:this.multiple};t=react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:this.props.className,style:this.props.style},this.state.before,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{onClick:function(t){return e.commonChooseFile(t)},style:{overflow:"hidden",postion:"relative",display:this.wrapperDisplay}},this.state.chooseBtn),this.state.middle,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{onClick:function(t){return e.commonUpload(t)},style:{overflow:"hidden",postion:"relative",display:this.chooseAndUpload?"none":this.wrapperDisplay}},this.state.uploadBtn),this.state.after,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input",_extends({type:"file",name:"ajax_upload_file_input",ref:"ajax_upload_file_input",style:{display:"none"},onChange:function(t){return e.commonChange(t)}},n)))}return t}},{key:"_multiIEForm",value:function(){for(var e=[],t=!1,n="function"==typeof this.disabledIEChoose?this.disabledIEChoose():this.disabledIEChoose,o=0;o<IEFormGroup.length;o++)r.call(this,e,o),IEFormGroup[o]&&!t&&(t=!0,currentIEID=o),o==IEFormGroup.length-1&&!t&&IEFormGroup.push(!0);return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:this.props.className,style:this.props.style,id:"react-file-uploader"},e);function r(e,o){var r=this;if(!IEFormGroup[o]||!t){var a=IEFormGroup[o],i={accept:this.accept,disabled:n},s=react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input",_extends({type:"file",name:"ajax_upload_hidden_input_".concat(o),id:"ajax_upload_hidden_input_".concat(o),ref:"ajax_upload_hidden_input_".concat(o),onChange:function(e){return r.IEChooseFile(e)},onClick:function(e){return r.IEBeforeChoose(e)},style:{position:"absolute",left:"-30px",top:0,zIndex:"50",fontSize:"80px",width:"200px",opacity:0,filter:"alpha(opacity=0)"}},i));o="".concat(this.IETag).concat(o),e.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("form",{id:"ajax_upload_file_form_".concat(o),method:"post",target:"ajax_upload_file_frame_".concat(o),key:"ajax_upload_file_form_".concat(o),encType:"multipart/form-data",ref:"form_".concat(o),onSubmit:function(e){return r.IEUpload(e)},style:{display:a?"block":"none"}},this.state.before,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{style:{overflow:"hidden",position:"relative",display:"inline-block"}},this.state.chooseBtn,s),this.state.middle,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{style:{overflow:"hidden",position:"relative",display:this.chooseAndUpload?"none":this.wrapperDisplay}},this.state.uploadBtn,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input",{type:"submit",style:{position:"absolute",left:0,top:0,fontSize:"50px",width:"200px",opacity:0}})),this.state.after)),e.push(react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("iframe",{id:"ajax_upload_file_frame_".concat(o),name:"ajax_upload_file_frame_".concat(o),key:"ajax_upload_file_frame_".concat(o),className:"ajax_upload_file_frame",style:{display:"none",width:0,height:0,margin:0,border:0}}))}}}}]),FileUpload}(react__WEBPACK_IMPORTED_MODULE_0__.Component);FileUpload.propTypes={options:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.shape({baseUrl:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string.isRequired,param:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object,prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func]),dataType:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,chooseAndUpload:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,paramAddToField:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object,prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func]),wrapperDisplay:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,timeout:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.number,accept:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,multiple:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,numberLimit:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.number,prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func]),fileFieldName:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func]),withCredentials:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,requestHeaders:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object,tag:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,userAgent:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string,disabledIEChoose:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func]),_withoutFileUpload:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,filesToUpload:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object),textBeforeFiles:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.bool,beforeChoose:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,chooseFile:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,beforeUpload:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,doUpload:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,uploading:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,uploadSuccess:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,uploadError:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,uploadFail:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func,onabort:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.func}).isRequired,style:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.object,className:prop_types__WEBPACK_IMPORTED_MODULE_1___default.a.string},__webpack_exports__.a=FileUpload},189:function(e,t,n){},196:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return q}));var o=n(0),r=n.n(o),a=n(24),i=n(1),s=n.n(i),l=n(81),c=n(82),u=n(80),p=n(23),f=n(13),d=n(7),_=Object(d.a)();function h(e,t){return function(n,o){n({type:f.c,filed:e,value:t})}}var y=n(185),m=n.n(y),g=n(188);n(189);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function C(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(s,e);var t,n,o,a,i=(t=s,function(){var e,n=D(t);if(O()){var o=D(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return C(this,e)});function s(){return b(this,s),i.apply(this,arguments)}return n=s,(o=[{key:"render",value:function(){var e=this,t={baseUrl:"/manage/product/upload.do",fileFieldName:"upload_file",dataType:"json",chooseAndUpload:!0,uploadSuccess:function(t){e.props.onSuccess(t.data)},uploadError:function(t){e.props.onError(t.message||"上传图片出错啦")}};return r.a.createElement(g.a,{options:t,className:"pic-detail-box"},r.a.createElement("button",{className:"btn",ref:"chooseAndUpload"},"请选择图片"))}}])&&v(n.prototype,o),a&&v(n,a),s}(o.Component);n(152),n(190);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function M(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?F(e):t}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var S,x,j,L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(s,e);var t,n,o,a,i=(t=s,function(){var e,n=U(t);if(R()){var o=U(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return M(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).handleCancelChangeCategoryEdit=t.handleCancelChangeCategoryEdit.bind(F(t)),t.handleShowChangeCategoryEdit=t.handleShowChangeCategoryEdit.bind(F(t)),t.handleConfirmChangeCategoryEdit=t.handleConfirmChangeCategoryEdit.bind(F(t)),t.initEditor=t.initEditor.bind(F(t)),t.state={showChangeCategory:!1,prevCategoryList:[],prevCategorySelected:[]},t}return n=s,(o=[{key:"componentDidMount",value:function(){!this.props.readOnly&&this.initEditor(),this.setState({prevCategoryList:this.props.product.categoryList,prevCategorySelected:this.props.product.categorySelected})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.readOnly;this.props.product.detail===e.product.detail||t||this.simditor.setValue(e.product.detail)}},{key:"handleShowChangeCategoryEdit",value:function(){this.setState({showChangeCategory:!0})}},{key:"handleCancelChangeCategoryEdit",value:function(){this.setState({showChangeCategory:!1});var e=this.state.prevCategoryList;this.props.handleInputChange("categoryList",e),this.props.handleInputChange("categorySelected",this.state.prevCategorySelected),this.props.handleInputChange("category",e[e.length-1]||{})}},{key:"handleConfirmChangeCategoryEdit",value:function(){this.setState({showChangeCategory:!1})}},{key:"initEditor",value:function(){var e=this,t=this.editorRef;this.simditor=new m.a({textarea:t,defaultValue:this.props.product.detail||"请输入内容",upload:{url:"/manage/product/richtext_img_upload.do",defaultImage:"",fileKey:"upload_file"}}),this.simditor.on("valuechanged",(function(t){e.props.handleInputChange("detail",e.simditor.getValue())}))}},{key:"render",value:function(){var e=this,t=this.props.product,n=t.name,o=t.subtitle,a=t.detail,i=t.price,s=t.stock,c=t.categoryList,u=t.categorySelected,p=t.imageHost,f=t.category,d=this.props,_=d.readOnly,h=d.isEdit,y=d.isNew,m=this.props.product.subImages;return m=m&&m.length>0?m.split(",").map((function(e){return{uri:e,url:p+e}})):[],r.a.createElement("div",null,r.a.createElement(l.a,{onOk:function(){return e.handleConfirmChangeCategoryEdit()},onCancel:function(){return e.handleCancelChangeCategoryEdit()},title:"修改分类",visible:this.state.showChangeCategory},r.a.createElement("div",null,c.map((function(t,n){return r.a.createElement("select",{onChange:function(t){return e.props.handleChangeCategory(n,t)},value:u[n],key:n,readOnly:_,className:"mb10"},r.a.createElement("option",{value:""},"请选择",n+1,"级分类"),t.map((function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.name)})))})))),r.a.createElement("div",{className:"g12 p0 pb20"},r.a.createElement("label",{className:"left"},"商品名称:"),r.a.createElement("div",{className:"g8 p0"},r.a.createElement("input",{value:n,onChange:function(t){e.props.handleInputChange("name",t)},readOnly:_}))),r.a.createElement("div",{className:"g12 p0 pb20"},r.a.createElement("label",{className:"left"},"商品描述"),r.a.createElement("div",{className:"g8 p0"},r.a.createElement("input",{value:o,onChange:function(t){e.props.handleInputChange("subtitle",t)},readOnly:_}))),r.a.createElement("div",{className:"g12 p0 pb20"},r.a.createElement("label",{className:"left"},"所属分类:"),!y&&f&&r.a.createElement("div",{className:"".concat(h?"g6":"g8"," p0 mr10")},r.a.createElement("input",{value:f.name,readOnly:!0,onChange:function(){}})),!_&&h&&r.a.createElement("div",{className:"g2 p0"},r.a.createElement("button",{className:"btn",onClick:this.handleShowChangeCategoryEdit},"修改分类")),!_&&y&&r.a.createElement("div",{className:"category-box"},c.map((function(t,n){return r.a.createElement("select",{onChange:function(t){return e.props.handleChangeCategory(n,t)},value:u[n],key:n,readOnly:_},r.a.createElement("option",{value:""},"请选择",n+1,"级分类"),t.map((function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.name)})))})))),r.a.createElement("div",{className:"g12 p0 pb20"},r.a.createElement("label",{className:"left"},"商品价格"),r.a.createElement("div",{className:"g8 p0 unit"},r.a.createElement("input",{value:i,type:"number",onChange:function(t){e.props.handleInputChange("price",t)},readOnly:_}),r.a.createElement("span",{className:"ml10"},"元"))),r.a.createElement("div",{className:"g12 p0 pb20"},r.a.createElement("label",{className:"left"},"商品库存"),r.a.createElement("div",{className:"g8 p0 unit"},r.a.createElement("input",{value:s,type:"number",onChange:function(t){e.props.handleInputChange("stock",t)},readOnly:_}),r.a.createElement("span",{className:"ml10"},"件"))),r.a.createElement("div",{className:"g12 p0 pb20 sub-images"},r.a.createElement("label",{className:"left"},"商品图片"),r.a.createElement("div",null,m.map((function(t,n){return r.a.createElement("div",{key:t.url,className:"upload-img-item"},r.a.createElement("img",{src:t.url}),r.a.createElement("i",{className:"close ".concat(_?"hide":""),onClick:function(){e.props.handleImageDelete(n)}},"x"))})),!_&&r.a.createElement(I,{onSuccess:function(t){return e.props.onUploadSuccess(t)},onError:function(t){return e.props.onUploadError(t)}}))),r.a.createElement("div",{className:"g12 p0 pb20"},r.a.createElement("label",{className:"mb10 left"},"商品详情"),_&&r.a.createElement("div",{className:"detail-raw g8 p0",dangerouslySetInnerHTML:{__html:a}}),!_&&r.a.createElement("div",{className:"g8 p0"},r.a.createElement("textarea",{ref:function(t){e.editorRef=t},onChange:function(){}}))),!_&&r.a.createElement("div",{className:"g12 p0 pb20 txt-r"},r.a.createElement("a",{className:"btn",onClick:this.props.handleSave},"提交")))}}])&&T(n.prototype,o),a&&T(n,a),s}(o.Component);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function B(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?K(e):t}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}L.propTypes={product:s.a.object,readOnly:s.a.bool,isEdit:s.a.bool,handleInputChange:s.a.func,handleChangeCategory:s.a.func,handleImageDelete:s.a.func,onUploadSuccess:s.a.func,onError:s.a.func,clearErrorMsgFunc:s.a.func,setErrorMsgFunc:s.a.func,handleSave:s.a.func};var q=Object(a.b)((function(e){return{productDetail:e.productDetail,loadingError:e.loadingError}}),(function(e){return{setErrorMsgFunc:function(t){e(Object(u.c)(t))},clearErrorMsgFunc:function(){e(Object(u.a)())},getProductDetailFunc:function(t){e(function(e){return function(t,n){t(Object(u.d)()),p.a.get("/manage/product/detail.do",{productId:e}).then((function(e){var n=e.data,o=n.parentCategoryId;p.a.get("/manage/category/get_category.do",{categoryId:o}).then((function(e){n.category=e.data.filter((function(e){return e.id===n.categoryId}))[0],t({type:f.b,product:n}),t(Object(u.b)())}))})).catch((function(e){t(Object(u.c)(e.message))}))}}(t))},clearProductDetailFunc:function(){e((function(e,t){e({type:f.a})}))},saveProductFunc:function(t){e(function(e){return function(t,n){t(Object(u.d)()),p.a.post("/manage/product/save.do",{},e).then((function(e){t({type:f.d}),_.push("/products")})).catch((function(e){t(Object(u.c)(e.message))}))}}(t))},handleProductDetailChangeFunc:function(t,n){e(h(t,n))},deleteSubImgsFunc:function(t){e(function(e){return function(t,n){var o=n().productDetail.subImages.split(",");t(h("subImages",o=o.filter((function(t,n){return n!==e})).join(",")))}}(t))},uploadSubImgsSuccessFunc:function(t){e(function(e){var t=e.url,n=e.uri;return function(e,o){var r=o().productDetail,a=r.imageHost,i=r.subImages;i&&i.length>0?((i=i.split(",")).push(n),i=i.join(",")):i=n,e(h("subImages",i)),a||e(h("imageHost",a=t.slice(0,t.indexOf(n))))}}(t))}}}))((j=x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(s,e);var t,n,o,a,i=(t=s,function(){var e,n=H(t);if(W()){var o=H(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return B(this,e)});function s(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).handleInputChange=t.handleInputChange.bind(K(t)),t.handleImageDelete=t.handleImageDelete.bind(K(t)),t.handleSave=t.handleSave.bind(K(t)),t.handleChangeCategory=t.handleChangeCategory.bind(K(t)),t.onUploadError=t.onUploadError.bind(K(t)),t.onUploadSuccess=t.onUploadSuccess.bind(K(t));var n=t.props.match.path;return t.state={readOnly:"/products/:id"===n,isEdit:!1,isNew:!1,title:""},t}return n=s,(o=[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.path,n=this.props.match.params.id;"/products/:id"===t?this.setState({title:"商品详情"}):"/products/:id/edit"===t?this.setState({title:"商品编辑",isEdit:!0}):"/products/new"===t&&this.setState({title:"添加商品",isNew:!0}),"/products/new"!==t&&this.props.getProductDetailFunc(n),p.a.get("/manage/category/get_category.do",{categoryId:0}).then((function(t){e.props.handleProductDetailChangeFunc("categoryList",[t.data])}))}},{key:"componentWillReceiveProps",value:function(e){this.props.defaultDetail!==e.defaultDetail&&this.simditor.setValue(e.defaultDetail)}},{key:"componentWillUnmount",value:function(){this.props.clearProductDetailFunc()}},{key:"onUploadSuccess",value:function(e){this.props.uploadSubImgsSuccessFunc(e)}},{key:"handleImageDelete",value:function(e){this.props.deleteSubImgsFunc(e)}},{key:"onUploadError",value:function(e){this.props.setErrorMsgFunc(e)}},{key:"handleInputChange",value:function(e,t){var n=t;"detail"!==e&&(n=t.target.value),this.props.handleProductDetailChangeFunc(e,n)}},{key:"handleChangeCategory",value:function(e,t){var n=this,o=t.target.value,r=this.props.productDetail,a=r.categoryList,i=r.categorySelected;if(""!==o){var s=i.slice(0,e);s.push(o);var l=a.slice(0,e+1);if(this.props.handleProductDetailChangeFunc("categoryList",l),this.props.handleProductDetailChangeFunc("categorySelected",s),l.length>=1){var c=l[l.length-1].filter((function(e){return e.id==s[s.length-1]}))[0];this.props.handleProductDetailChangeFunc("category",c||{})}p.a.get("/manage/category/get_category.do",{categoryId:o}).then((function(t){if(0!==t.data.length){var o=a.slice(0,e+1);o.push(t.data),n.props.handleProductDetailChangeFunc("categoryList",o)}}))}else{var u=a.slice(0,e+1),f=i.slice(0,e);if(this.props.handleProductDetailChangeFunc("categoryList",u),this.props.handleProductDetailChangeFunc("categorySelected",f),u.length>=2){var d=u[u.length-2].filter((function(e){return e.id==f[f.length-1]}))[0];this.props.handleProductDetailChangeFunc("category",d||{})}}}},{key:"handleSave",value:function(){var e=this.props.productDetail,t=e.id,n=e.name,o=e.subtitle,r=e.subImages,a=e.detail,i=e.price,s=e.stock,l=e.categorySelected,c=e.categoryId,u={id:t,name:n,subtitle:o,categoryId:l[l.length-1]||c,subImages:r,price:i,stock:s,status:1,detail:a},p={name:"商品名称",subtitle:"商品描述",categoryId:"所属分类",subImages:"商品图片",price:"商品价格",stock:"商品库存",detail:"商品详情"};for(var f in u)if("categorySelected"===f&&0===u[f].length||!u[f])return void this.props.setErrorMsgFunc(p[f]+" 不能为空");this.props.saveProductFunc(u)}},{key:"render",value:function(){var e=this,t=this.props.loadingError,n=t.isLoading,o=t.errorMsg;return r.a.createElement("div",null,r.a.createElement("h1",null,this.state.title),o&&r.a.createElement(l.a,{onOk:function(){return e.props.clearErrorMsgFunc()},onCancel:function(){return e.props.clearErrorMsgFunc()},title:"对话框",visible:!!o},r.a.createElement("p",null,o)),n&&r.a.createElement(c.a,null),r.a.createElement(L,{readOnly:this.state.readOnly,isEdit:this.state.isEdit,isNew:this.state.isNew,product:this.props.productDetail,handleSave:this.handleSave,handleInputChange:this.handleInputChange,handleChangeCategory:this.handleChangeCategory,handleImageDelete:this.handleImageDelete,onUploadSuccess:this.onUploadSuccess,onUploadError:this.onUploadError}))}}])&&N(n.prototype,o),a&&N(n,a),s}(o.Component),x.propTypes={productDetail:s.a.object,loadingError:s.a.object,clearErrorMsgFunc:s.a.func,setErrorMsgFunc:s.a.func,saveProductFunc:s.a.func,deleteSubImgsFunc:s.a.func,uploadSubImgsSuccessFunc:s.a.func},S=j))||S},80:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return s}));var o=n(10);function r(){return{type:o.d}}function a(){return{type:o.b}}function i(e){return{type:o.c,message:e}}function s(){return{type:o.a}}},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var o=n(0),r=n.n(o);n(84);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(d,e);var t,n,o,a,f=(t=d,function(){var e,n=u(t);if(c()){var o=u(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return s(this,e)});function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=f.call(this,e)).state={confirmLoading:!1},t.onOk=t.onOk.bind(l(t)),t.onCancel=t.onCancel.bind(l(t)),t.handleKeyDown=t.handleKeyDown.bind(l(t)),t}return n=d,(o=[{key:"componentDidMount",value:function(){var e=this;this.modalContentRef.focus(),this.maskRef.onclick=function(){e.onCancel()}}},{key:"handleKeyDown",value:function(e){27===e.keyCode&&this.onCancel()}},{key:"onOk",value:function(){if(!this.props.confirmLoading){var e=this.props.onOk;"function"==typeof e&&e()}}},{key:"onCancel",value:function(){var e=this.props.onCancel;"function"==typeof e&&e()}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,o=t.children,a=this.props,i=a.visible,s=a.confirmLoading;return n=n||"提示",r.a.createElement("div",{className:"modal-box ".concat(i?"":"hide")},r.a.createElement("div",{className:"modal-mask",ref:function(t){return e.maskRef=t}}),r.a.createElement("div",{className:"modal-content",ref:function(t){return e.modalContentRef=t},tabIndex:"0",onKeyDown:this.handleKeyDown},r.a.createElement("div",{className:"modal-header"},n,r.a.createElement("i",{onClick:this.onCancel,className:"right"},"x")),r.a.createElement("div",{className:"modal-body"},o),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{onClick:this.onCancel,className:"btn default mr10"},"取消"),r.a.createElement("button",{onClick:this.onOk,className:"btn ".concat(s?"disabled":"")},"确定"))))}}])&&i(n.prototype,o),a&&i(n,a),d}(o.Component)},82:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var o=n(0),r=n.n(o);n(83);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(f,e);var t,n,o,a,p=(t=f,function(){var e,n=c(t);if(l()){var o=c(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return s(this,e)});function f(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),p.call(this,e)}return n=f,(o=[{key:"render",value:function(){return r.a.createElement("div",{className:"loading-container ".concat(this.props.isFull?"is-full":"")},r.a.createElement("div",{className:"loading-mask"}),r.a.createElement("div",{className:"loading-box"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null)))}}])&&i(n.prototype,o),a&&i(n,a),f}(o.Component)},83:function(e,t,n){},84:function(e,t,n){}}]);